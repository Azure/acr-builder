# Start off by pulling the image all of my apps depend on
[[step]]
id = "{{.Values.pullStep}}"
run = "docker pull golang:1.10.1-stretch"

# Execute builds in parallel using the previously pulled image as a cache
[[step]]
id = "build-foo"
run = "build -f Dockerfile https://github.com/Azure/acr-builder.git --cache-from=ubuntu"
when = ["{{.Values.pullStep}}"]

[[step]]
id = "build-bar"
run = "build -f Dockerfile https://github.com/Azure/acr-builder.git --cache-from=ubuntu"
when = ["{{.Values.pullStep}}"]

[[step]]
run = "bash ls -la"